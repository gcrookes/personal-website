import{_ as P}from"./BorderedBox.vue.e69313b5.js";import{s as k,h as B,r as E,u as w,k as A,l as F,v as I,x as R,y as M,z as D,A as C,B as U,C as $,D as j,n as z,o as N,c as O,b as d,w as G,E as m,G as H,H as K}from"./entry.36df233e.js";const Q=k({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(r,{slots:l,emit:f}){const b=B(),n=E(null);let i=0;const a=[];function v(e){const c=typeof e=="boolean"?e:r.noErrorFocus!==!0,_=++i,h=(t,s)=>{f("validation"+(t===!0?"Success":"Error"),s)},q=t=>{const s=t.validate();return typeof s.then=="function"?s.then(u=>({valid:u,comp:t}),u=>({valid:!1,comp:t,err:u})):Promise.resolve({valid:s,comp:t})};return(r.greedy===!0?Promise.all(a.map(q)).then(t=>t.filter(s=>s.valid!==!0)):a.reduce((t,s)=>t.then(()=>q(s).then(u=>{if(u.valid===!1)return Promise.reject(u)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return _===i&&h(!0),!0;if(_===i){const{comp:s,err:u}=t[0];if(u!==void 0&&console.error(u),h(!1,s),c===!0){const S=t.find(({comp:V})=>typeof V.focus=="function"&&D(V.$)===!1);S!==void 0&&S.comp.focus()}}return!1})}function p(){i++,a.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function o(e){e!==void 0&&C(e);const c=i+1;v().then(_=>{c===i&&_===!0&&(r.onSubmit!==void 0?f("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function x(e){e!==void 0&&C(e),f("reset"),U(()=>{p(),r.autofocus===!0&&r.noResetFocus!==!0&&y()})}function y(){$(()=>{if(n.value===null)return;const e=n.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||n.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||n.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(n.value.querySelectorAll("[tabindex]"),c=>c.tabIndex>-1);e!=null&&e.focus({preventScroll:!0})})}w(j,{bindComponent(e){a.push(e)},unbindComponent(e){const c=a.indexOf(e);c>-1&&a.splice(c,1)}});let g=!1;return A(()=>{g=!0}),F(()=>{g===!0&&r.autofocus===!0&&y()}),I(()=>{r.autofocus===!0&&y()}),Object.assign(b.proxy,{validate:v,resetValidation:p,submit:o,reset:x,focus:y,getValidationComponents:()=>a}),()=>R("form",{class:"q-form",ref:n,onSubmit:o,onReset:x},M(l.default))}}),T={class:"row q-col-gutter-x-sm q-gutter-y-md"},J="Reach out for any inquires and I will get back to you promptly",Y=z({__name:"index",setup(r){const l=E({email:"",name:"",message:""}),f=async()=>{await $fetch("/api/saveMessage",{method:"post",body:l.value})};return(b,n)=>{const i=P,a=H,v=K,p=Q;return N(),O("div",T,[d(p,{class:"row q-col-gutter-x-sm q-gutter-y-md",onSubmit:f},{default:G(()=>[d(i,{class:"col-12 q-ml-xs",title:"Contact",body:J,key:"title"}),d(a,{label:"Name",class:"col-12 col-md-6",modelValue:m(l).name,"onUpdate:modelValue":n[0]||(n[0]=o=>m(l).name=o),rules:[o=>!!o||"Please leave your name"],outlined:"",dark:""},null,8,["modelValue","rules"]),d(a,{label:"Email Address",class:"col-12 col-md-6",type:"email",modelValue:m(l).email,"onUpdate:modelValue":n[1]||(n[1]=o=>m(l).email=o),rules:[o=>!!o||"Please leave your email"],outlined:"",dark:""},null,8,["modelValue","rules"]),d(a,{label:"Message",class:"col-12",type:"textarea",modelValue:m(l).message,"onUpdate:modelValue":n[2]||(n[2]=o=>m(l).message=o),rules:[o=>!!o||"Please leave a message"],outlined:"",dark:""},null,8,["modelValue","rules"]),d(v,{label:"Submit",color:"white",class:"ml-auto mr-2",size:"lg",dense:"",outline:"",type:"submit"})]),_:1})])}}});export{Y as default};
